% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dist-mixture.R
\name{mixture}
\alias{mixture}
\title{Construct a mixture distribution}
\usage{
mixture(dists, weights = 1, steps = 200, tail_p = 1e-04, ...)
}
\arguments{
\item{dists}{a \code{dist_fn_list} of distribution functions}

\item{weights}{a vector of weights}

\item{steps}{the number of points that the mixture distribution is
evaluated at to construct the empirical mixture}

\item{tail_p}{the support fo the tail of the distribution}

\item{...}{
  Named arguments passed on to \code{\link[=empirical_cdf]{empirical_cdf}}\describe{
    \item{\code{smooth}}{fits the empirical distribution with a pair of splines for CDF
and quantile function, creating a mostly smooth density. This smoothness
comes at the price of potential over-fitting and will produce small
differences between \code{p} and \code{q} functions such that \code{x=p(q(x))} is no
longer exactly true. Setting this to false will replace this with a
piecewise linear fit that is not smooth in the density, but is exact in
forward and reverse transformation.}
}}
}
\value{
a \code{dist_fn} of the mixture distribution
}
\description{
Constructs a mixture distribution from a list of component distributions
\eqn{\text{dist}_i} with corresponding weights \eqn{w_i}.
The CDF \eqn{F_{\text{mix}}} of the mixture is a weighted sum of the component CDFs:
\deqn{
F_{\text{mix}}(x) = \sum_{i=1}^{k} w_i \cdot F_i(x)
}
where \eqn{F_i} is the CDF of the \eqn{i}-th component distribution and
\eqn{\sum w_i = 1}. The implementation first evaluates the weighted CDF on a grid
of \eqn{x} values (including tail points defined by \code{tail_p} and potentially
knot points from empirical components). The resulting \eqn{(x, F_{\text{mix}}(x))}
pairs are then used as input to \code{empirical_cdf} to create the final smooth or
piecewise linear \code{dist_fns} object representing the mixture distribution.
}
\concept{empirical}

\section{Unit tests}{
\if{html}{\out{<div class="sourceCode">}}\preformatted{


dists = c(
  as.dist_fns("norm", mean=-1),
  as.dist_fns("norm", mean=1),
  as.dist_fns("gamma", shape=2)
)
weights = c(1,1,0.3)

mix = mixture(dists,weights)
testthat::expect_equal(
  format(mix),
  "mixture; Median (IQR) 0.289 [-0.886 â€” 1.31]"
)

}\if{html}{\out{</div>}}
}

