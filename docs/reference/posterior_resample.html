<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate a set of samples from selected posteriors — posterior_resample • tidyabc</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a set of samples from selected posteriors — posterior_resample"><meta name="description" content="Once an ABC model fitting is complete the simulation data is generally
only one possible realisation of the parameters, which has been selected for
closeness. To properly compare the output with the observed data we need a
set of posterior re-samples, which are selected from posteriors according to
importance."><meta property="og:description" content="Once an ABC model fitting is complete the simulation data is generally
only one possible realisation of the parameters, which has been selected for
closeness. To properly compare the output with the observed data we need a
set of posterior re-samples, which are selected from posteriors according to
importance."><meta property="og:image" content="https://ai4ci.github.io/tidyabc/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidyabc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tidyabc.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/abc-adaptive.html">ABC Adaptive</a></li>
    <li><a class="dropdown-item" href="../articles/abc-smc.html">ABC Sequential Monte-Carlo</a></li>
    <li><a class="dropdown-item" href="../articles/s3-distributions.html">Statistical distributions in tidyabc</a></li>
    <li><a class="dropdown-item" href="../articles/scorer-functions.html">Simulation, scoring and convergence functions</a></li>
    <li><a class="dropdown-item" href="../articles/sim-example.html">Early outbreak and Generation time</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ai4ci/tidyabc/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Generate a set of samples from selected posteriors</h1>
      <small class="dont-index">Source: <a href="https://github.com/ai4ci/tidyabc/blob/HEAD/R/abc-workflow.R" class="external-link"><code>R/abc-workflow.R</code></a></small>
      <div class="d-none name"><code>posterior_resample.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Once an ABC model fitting is complete the simulation data is generally
only one possible realisation of the parameters, which has been selected for
closeness. To properly compare the output with the observed data we need a
set of posterior re-samples, which are selected from posteriors according to
importance.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">posterior_resample</span><span class="op">(</span></span>
<span>  <span class="va">posteriors_df</span>,</span>
<span>  <span class="va">sim_fn</span>,</span>
<span>  n_resamples <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  max_samples <span class="op">=</span> <span class="fl">200</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-posteriors-df">posteriors_df<a class="anchor" aria-label="anchor" href="#arg-posteriors-df"></a></dt>
<dd><p>a dataframe of posteriors that have been selected by ABC
this may include columns for scores, weight and/or simulation outputs (
<code>abc_component_score</code>, <code>abc_summary_distance</code>, <code>abc_weight</code>, <code>abc_simulation</code>
) as well as columns matching the <code>priors</code> input specification.</p></dd>


<dt id="arg-sim-fn">sim_fn<a class="anchor" aria-label="anchor" href="#arg-sim-fn"></a></dt>
<dd><p>a user defined function that takes a set of parameters named
the same as <code>priors_list</code>. It must return a simulated data set in the
same format as <code>obsdata</code>, or that can be compared to <code>simdata</code> by
<code>scorer_fn</code>. This function must not refer to global parameters, and will be
automatically crated with <code>carrier</code>.</p></dd>


<dt id="arg-n-resamples">n_resamples<a class="anchor" aria-label="anchor" href="#arg-n-resamples"></a></dt>
<dd><p>the number of resamples for each parameter combination.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>an optional random seed</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>parallelise the simulation? If this is set to true then the
simulation step will be parallelised using <code>furrr</code>. For this to make any
difference it must have been set up with the following:
<code>future::plan(future::multisession, workers = parallel::detectCores()-2)</code></p></dd>


<dt id="arg-max-samples">max_samples<a class="anchor" aria-label="anchor" href="#arg-max-samples"></a></dt>
<dd><p>the maximum total number of resamples to pick.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a dataframe of the posteriors with an <code>abc_sim</code> list column
containing the output of <code>sim_fn</code> called with the parameters in that row.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">=</span> <span class="fu"><a href="example_fns.html">example_adaptive_fit</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sample_df</span> <span class="op">=</span> <span class="fu">posterior_resample</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">fit</span><span class="op">$</span><span class="va">posteriors</span>,</span></span>
<span class="r-in"><span>  sim_fn <span class="op">=</span> <span class="va">example_sim_fn</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># the fitted simulations are in the `abc_sim` column</span></span></span>
<span class="r-in"><span><span class="va">sim1</span> <span class="op">=</span> <span class="va">sample_df</span><span class="op">$</span><span class="va">abc_sim</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sim1</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">head</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 4.466814 6.909572 6.290005 3.957646 6.529836 3.787321 5.488997 5.770207</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] 1.507112 3.434707</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 7.363475 4.291899 3.958592 4.616324 5.589357 4.799870 4.985813 4.930273</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] 5.903717 5.890033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Challen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

