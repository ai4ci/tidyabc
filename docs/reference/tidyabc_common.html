<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Common workflow options — tidyabc_common • tidyabc</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Common workflow options — tidyabc_common"><meta name="description" content="Common workflow options"><meta property="og:description" content="Common workflow options"><meta property="og:image" content="https://ai4ci.github.io/tidyabc/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidyabc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tidyabc.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/abc-adaptive.html">ABC Adaptive</a></li>
    <li><a class="dropdown-item" href="../articles/abc-smc.html">ABC Sequential Monte-Carlo</a></li>
    <li><a class="dropdown-item" href="../articles/s3-distributions.html">Tidy distribution functions</a></li>
    <li><a class="dropdown-item" href="../articles/scorer-functions.html">Tidy distribution functions</a></li>
    <li><a class="dropdown-item" href="../articles/sim_example.html">Pegasus R0 / Generation time - EXERCISE</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Common workflow options</h1>

      <div class="d-none name"><code>tidyabc_common.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Common workflow options</p>
    </div>


    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-obsdata">obsdata<a class="anchor" aria-label="anchor" href="#arg-obsdata"></a></dt>
<dd><p>The observational data. The data in this will typically
be a named list, but could be anything, e.g. dataframe. It is the reference
data that the simulation model is aiming to replicate.</p></dd>


<dt id="arg-priors-list">priors_list<a class="anchor" aria-label="anchor" href="#arg-priors-list"></a></dt>
<dd><p>a named list of priors specified as a <code>abc_prior</code> S3 object
(see <code><a href="priors.html">priors()</a></code>), this can include derived values as unnamed 2-sided
formulae, where the LHS of the formula will be assigned to the value of the
RHS, plus optionally a set of constraints as one sided formulae where the
RHS of the formulae will resolve to a boolean value.</p></dd>


<dt id="arg-proposal-list">proposal_list<a class="anchor" aria-label="anchor" href="#arg-proposal-list"></a></dt>
<dd><p>a named list of statistical or empirical distributions
resulting from previous waves specified as a <code>abc_prior</code> S3 object (see
<code><a href="priors.html">priors()</a></code>).</p></dd>


<dt id="arg-sim-fn">sim_fn<a class="anchor" aria-label="anchor" href="#arg-sim-fn"></a></dt>
<dd><p>a user defined function that takes a set of parameters named
the same as the list <code>priors</code>. It must return a simulated data set in the
same format as <code>obsdata</code>, or that can be compared to <code>simdata</code> by
<code>scorer_fn</code>. This function must not refer to global parameters, and will be
automatically crated with <code>carrier</code>.</p></dd>


<dt id="arg-simdata">simdata<a class="anchor" aria-label="anchor" href="#arg-simdata"></a></dt>
<dd><p>The simulated data. The simulated data must be in exactly
the same format as <code>obsdata</code>, or that can be compared to <code>simdata</code> by
<code>scorer_fn</code>.</p></dd>


<dt id="arg-scorer-fn">scorer_fn<a class="anchor" aria-label="anchor" href="#arg-scorer-fn"></a></dt>
<dd><p>a user supplied function that matches the following
signature <code>scorer_fn(simdata, obsdata, ....)</code>, i.e. it takes data in the
format of <code>simdata</code> paired with the original <code>obsdata</code> and returns a named
list of component scores per simulation. This function can make use of the
<code>calculate_*()</code> set of functions to compare components of the simulation to
the original data. This function must not refer to global parameters, and
will be automatically crated with <code>carrier</code>. If this is a purrr style
function then <code>.x</code> will refer to simulation output and <code>.y</code> to original
observation data.</p></dd>


<dt id="arg-obsscores">obsscores<a class="anchor" aria-label="anchor" href="#arg-obsscores"></a></dt>
<dd><p>Summary scores for the observational data. This will
be a named list, and is equivalent to the output of <code>scorer_fn</code>,
on the observed data. If not given typically it will be assumed to be all
zeros.</p></dd>


<dt id="arg-n-sims">n_sims<a class="anchor" aria-label="anchor" href="#arg-n-sims"></a></dt>
<dd><p>The number of simulations to run per wave (for SMC and Adaptive)
or overall (for Rejection). For rejection sampling a large number is
recommended, for the others sma</p></dd>


<dt id="arg-simscores">simscores<a class="anchor" aria-label="anchor" href="#arg-simscores"></a></dt>
<dd><p>Scores for the simulated data, as output by <code>scorer_fn</code>.</p></dd>


<dt id="arg-distance-method">distance_method<a class="anchor" aria-label="anchor" href="#arg-distance-method"></a></dt>
<dd><p>what metric is used to combine <code>simscores</code> and <code>obsscores</code>
and is one of <code>"euclidean"</code>, <code>"manhattan"</code>, or <code>"mahalanobis"</code>.</p></dd>


<dt id="arg-keep-simulations">keep_simulations<a class="anchor" aria-label="anchor" href="#arg-keep-simulations"></a></dt>
<dd><p>keep the individual simulation results in the output
of an ABC workflow. This can have large implications for the size of the
result. It may also not be what you want and it is probably worth considering
resampling the posteriors rather than keeping the simulations.</p></dd>


<dt id="arg-acceptance-rate">acceptance_rate<a class="anchor" aria-label="anchor" href="#arg-acceptance-rate"></a></dt>
<dd><p>What proportion of simulations to keep in ABC rejection
or hard ABC parts of the algorithms.</p></dd>


<dt id="arg-posteriors-df">posteriors_df<a class="anchor" aria-label="anchor" href="#arg-posteriors-df"></a></dt>
<dd><p>a dataframe of posteriors that have been selected by ABC
this may include columns for scores, weight and/or simulation outputs (
<code>abc_component_score</code>, <code>abc_summary_distance</code>, <code>abc_weight</code>, <code>abc_simulation</code>
) as well as columns matching the <code>priors</code> input specification.</p></dd>


<dt id="arg-converged-fn">converged_fn<a class="anchor" aria-label="anchor" href="#arg-converged-fn"></a></dt>
<dd><p>a function that takes a <code>summary</code> and <code>per_param</code> input
and generates a logical indicator that the function has converged</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>parallelise the simulation? If this is set to true then the
simulation step will be parallelised using <code>furrr</code>. For this to make any
difference it must have been set up with the following:
<code>future::plan(future::multisession, workers = parallel::detectCores()-2)</code></p></dd>


<dt id="arg-fit">fit<a class="anchor" aria-label="anchor" href="#arg-fit"></a></dt>
<dd><p>A S3 <code>abc_fit</code> object as output by the <code>abc_XXX</code> functions</p></dd>


<dt id="arg-p">p<a class="anchor" aria-label="anchor" href="#arg-p"></a></dt>
<dd><p>a <code>progressr</code> progress bar</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>an optional random seed</p></dd>


<dt id="arg-knots">knots<a class="anchor" aria-label="anchor" href="#arg-knots"></a></dt>
<dd><p>the number of knots to model the CDF with. Optional, and will be
typically inferred from the data size. Small numbers tend to work better if
we expect the distribution to be unimodal.</p></dd>


<dt id="arg-bw">bw<a class="anchor" aria-label="anchor" href="#arg-bw"></a></dt>
<dd><p>for Adaptive ABC data distributions are smoothed before modelling
the CDF. Over smoothing can reduce convergence, under-smoothing may result
in noisy posterior estimates. This is in units of the ESS and defaults to
0.1.</p></dd>


<dt id="arg-max-time">max_time<a class="anchor" aria-label="anchor" href="#arg-max-time"></a></dt>
<dd><p>the maximum time in seconds to spend in ABC waves before admitting
defeat. This time may not be all used if the algorithm converges.</p></dd>


<dt id="arg-allow-continue">allow_continue<a class="anchor" aria-label="anchor" href="#arg-allow-continue"></a></dt>
<dd><p>if SMC or adaptive algorithms have not converged after
<code>max_time</code> allow the algorithm to interactively prompt the user to continue.</p></dd>


<dt id="arg-max-recover">max_recover<a class="anchor" aria-label="anchor" href="#arg-max-recover"></a></dt>
<dd><p>if the effective sample size of SMC or adaptive algorithms
drops below 200, the algorithm will retry the wave with double the sample
size to try and recover the shape of the distribution, up to a maximum of
<code>max_recover</code> times.</p></dd>


<dt id="arg-debug-errors">debug_errors<a class="anchor" aria-label="anchor" href="#arg-debug-errors"></a></dt>
<dd><p>Errors that crop up in <code>sim_fn</code> during a simulation due
to anomolous value combinations are hard to debug. If this flag is set,
whenever a <code>sim_fn</code> or <code>scorer_fn</code> throws an error an interactive debugging
session is started with the failing parameter combinations. This is not
compatible with running in parallel.</p></dd>


<dt id="arg-scoreweights">scoreweights<a class="anchor" aria-label="anchor" href="#arg-scoreweights"></a></dt>
<dd><p>A named vector with names matching output of <code>scorer_fn</code>
that defines the importance of this component of the scoring in the overall
distance and weighting of any given simulation. This can be used to assign
more weight on certain parts of the model output.</p></dd>

</dl></div>

  </main></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Challen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

